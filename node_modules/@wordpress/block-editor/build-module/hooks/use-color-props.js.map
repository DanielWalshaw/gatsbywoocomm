{"version":3,"sources":["@wordpress/block-editor/src/hooks/use-color-props.js"],"names":["classnames","getInlineStyles","getColorClassName","getColorObjectByAttributeValues","__experimentalGetGradientClass","getGradientValueBySlug","useEditorFeature","EMPTY_ARRAY","getColorClassesAndStyles","attributes","backgroundColor","textColor","gradient","style","backgroundClass","textClass","gradientClass","hasGradient","color","className","text","background","link","colorStyles","styleProp","undefined","useColorProps","colors","gradients","colorProps","backgroundColorObject","textColorObject"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport {\n\t__experimentalGetGradientClass,\n\tgetGradientValueBySlug,\n} from '../components/gradients';\nimport useEditorFeature from '../components/use-editor-feature';\n\n// The code in this file has largely been lifted from the color block support\n// hook.\n//\n// This utility is intended to assist where the serialization of the colors\n// block support is being skipped for a block but the color related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\nconst EMPTY_ARRAY = [];\n\n/**\n * Provides the CSS class names and inline styles for a block's color support\n * attributes.\n *\n * @param  {Object} attributes Block attributes.\n * @return {Object}            Color block support derived CSS classes & styles.\n */\nexport function getColorClassesAndStyles( attributes ) {\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\t// Collect color CSS classes.\n\tconst backgroundClass = getColorClassName(\n\t\t'background-color',\n\t\tbackgroundColor\n\t);\n\tconst textClass = getColorClassName( 'color', textColor );\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tconst hasGradient = gradientClass || style?.color?.gradient;\n\n\t// Determine color CSS class name list.\n\tconst className = classnames( textClass, gradientClass, {\n\t\t// Don't apply the background class if there's a gradient.\n\t\t[ backgroundClass ]: ! hasGradient && !! backgroundClass,\n\t\t'has-text-color': textColor || style?.color?.text,\n\t\t'has-background':\n\t\t\tbackgroundColor ||\n\t\t\tstyle?.color?.background ||\n\t\t\tgradient ||\n\t\t\tstyle?.color?.gradient,\n\t\t'has-link-color': style?.color?.link,\n\t} );\n\n\t// Collect inline styles for colors.\n\tconst colorStyles = style?.color || {};\n\tconst styleProp = getInlineStyles( { color: colorStyles } );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: styleProp,\n\t};\n}\n\n/**\n * Determines the color related props for a block derived from its color block\n * support attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param  {Object} attributes Block attributes.\n * @return {Object}            ClassName & style props from colors block support.\n */\nexport function useColorProps( attributes ) {\n\tconst { backgroundColor, textColor, gradient } = attributes;\n\n\tconst colors = useEditorFeature( 'color.palette' ) || EMPTY_ARRAY;\n\tconst gradients = useEditorFeature( 'color.gradients' ) || EMPTY_ARRAY;\n\n\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t// Force inline styles to apply colors when themes do not load their color\n\t// stylesheets in the editor.\n\tif ( backgroundColor ) {\n\t\tconst backgroundColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t);\n\n\t\tcolorProps.style.backgroundColor = backgroundColorObject.color;\n\t}\n\n\tif ( gradient ) {\n\t\tcolorProps.style.background = getGradientValueBySlug(\n\t\t\tgradients,\n\t\t\tgradient\n\t\t);\n\t}\n\n\tif ( textColor ) {\n\t\tconst textColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\ttextColor\n\t\t);\n\n\t\tcolorProps.style.color = textColorObject.color;\n\t}\n\n\treturn colorProps;\n}\n"]}