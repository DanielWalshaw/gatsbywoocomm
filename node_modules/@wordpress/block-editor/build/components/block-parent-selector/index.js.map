{"version":3,"sources":["@wordpress/block-editor/src/components/block-parent-selector/index.js"],"names":["BlockParentSelector","blockEditorStore","selectBlock","toggleBlockHighlight","select","getBlockName","getBlockParents","getSelectedBlockClientId","getSettings","blocksStore","hasBlockSupport","selectedBlockClientId","parents","_firstParentClientId","length","parentBlockName","_parentBlockType","settings","firstParentClientId","shouldHide","hasReducedUI","blockInformation","nodeRef","ref","onChange","isFocused","showMoversGestures","gestures","undefined","title","icon"],"mappings":";;;;;;;;;AAOA;;;;AAJA;;AACA;;AACA;;AACA;;AAMA;;AACA;;AACA;;AACA;;AAfA;AACA;AACA;;AAOA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,mBAAT,GAA+B;AAAA,qBACC,uBAC7CC,YAD6C,CADD;AAAA,MACrCC,WADqC,gBACrCA,WADqC;AAAA,MACxBC,oBADwB,gBACxBA,oBADwB;;AAAA,mBAIa,qBACzD,UAAEC,MAAF,EAAc;AAAA,kBAMTA,MAAM,CAAEH,YAAF,CANG;AAAA,QAEZI,YAFY,WAEZA,YAFY;AAAA,QAGZC,eAHY,WAGZA,eAHY;AAAA,QAIZC,wBAJY,WAIZA,wBAJY;AAAA,QAKZC,WALY,WAKZA,WALY;;AAAA,mBAOeJ,MAAM,CAAEK,aAAF,CAPrB;AAAA,QAOLC,eAPK,YAOLA,eAPK;;AAQb,QAAMC,qBAAqB,GAAGJ,wBAAwB,EAAtD;AACA,QAAMK,OAAO,GAAGN,eAAe,CAAEK,qBAAF,CAA/B;AACA,QAAME,oBAAoB,GAAGD,OAAO,CAAEA,OAAO,CAACE,MAAR,GAAiB,CAAnB,CAApC;AACA,QAAMC,eAAe,GAAGV,YAAY,CAAEQ,oBAAF,CAApC;;AACA,QAAMG,gBAAgB,GAAG,0BAAcD,eAAd,CAAzB;;AACA,QAAME,QAAQ,GAAGT,WAAW,EAA5B;AACA,WAAO;AACNU,MAAAA,mBAAmB,EAAEL,oBADf;AAENM,MAAAA,UAAU,EAAE,CAAET,eAAe,CAC5BM,gBAD4B,EAE5B,8BAF4B,EAG5B,IAH4B,CAFvB;AAONI,MAAAA,YAAY,EAAEH,QAAQ,CAACG;AAPjB,KAAP;AASA,GAxBwD,EAyBzD,EAzByD,CAJb;AAAA,MAIrCF,mBAJqC,cAIrCA,mBAJqC;AAAA,MAIhBC,UAJgB,cAIhBA,UAJgB;AAAA,MAIJC,YAJI,cAIJA,YAJI;;AA+B7C,MAAMC,gBAAgB,GAAG,yCAA4BH,mBAA5B,CAAzB,CA/B6C,CAiC7C;AACA;;AACA,MAAMI,OAAO,GAAG,sBAAhB;;AAnC6C,8BAoCJ,kCAAuB;AAC/DC,IAAAA,GAAG,EAAED,OAD0D;AAE/DE,IAAAA,QAF+D,oBAErDC,SAFqD,EAEzC;AACrB,UAAKA,SAAS,IAAIL,YAAlB,EAAiC;AAChC;AACA;;AACDjB,MAAAA,oBAAoB,CAAEe,mBAAF,EAAuBO,SAAvB,CAApB;AACA;AAP8D,GAAvB,CApCI;AAAA,MAoC3BC,kBApC2B,yBAoCrCC,QApCqC;;AA8C7C,MAAKR,UAAU,IAAID,mBAAmB,KAAKU,SAA3C,EAAuD;AACtD,WAAO,IAAP;AACA;;AAED,SACC;AACC,IAAA,SAAS,EAAC,oCADX;AAEC,IAAA,GAAG,EAAGV,mBAFP;AAGC,IAAA,GAAG,EAAGI;AAHP,KAIMI,kBAJN,GAMC,4BAAC,yBAAD;AACC,IAAA,SAAS,EAAC,4CADX;AAEC,IAAA,OAAO,EAAG;AAAA,aAAMxB,WAAW,CAAEgB,mBAAF,CAAjB;AAAA,KAFX;AAGC,IAAA,KAAK,EAAG;AACP;AACA,kBAAI,WAAJ,CAFO,EAGPG,gBAAgB,CAACQ,KAHV,CAHT;AAQC,IAAA,WAAW,MARZ;AASC,IAAA,IAAI,EAAG,4BAAC,kBAAD;AAAW,MAAA,IAAI,EAAGR,gBAAgB,CAACS;AAAnC;AATR,IAND,CADD;AAoBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport BlockIcon from '../block-icon';\nimport { useShowMoversGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Block parent selector component, displaying the hierarchy of the\n * current block selection as a single icon to \"go up\" a level.\n *\n * @return {WPComponent} Parent block selector.\n */\nexport default function BlockParentSelector() {\n\tconst { selectBlock, toggleBlockHighlight } = useDispatch(\n\t\tblockEditorStore\n\t);\n\tconst { firstParentClientId, shouldHide, hasReducedUI } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockParents,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { hasBlockSupport } = select( blocksStore );\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\t\tconst _firstParentClientId = parents[ parents.length - 1 ];\n\t\t\tconst parentBlockName = getBlockName( _firstParentClientId );\n\t\t\tconst _parentBlockType = getBlockType( parentBlockName );\n\t\t\tconst settings = getSettings();\n\t\t\treturn {\n\t\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\t\tshouldHide: ! hasBlockSupport(\n\t\t\t\t\t_parentBlockType,\n\t\t\t\t\t'__experimentalParentSelector',\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\thasReducedUI: settings.hasReducedUI,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst nodeRef = useRef();\n\tconst { gestures: showMoversGestures } = useShowMoversGestures( {\n\t\tref: nodeRef,\n\t\tonChange( isFocused ) {\n\t\t\tif ( isFocused && hasReducedUI ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttoggleBlockHighlight( firstParentClientId, isFocused );\n\t\t},\n\t} );\n\n\tif ( shouldHide || firstParentClientId === undefined ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-block-parent-selector\"\n\t\t\tkey={ firstParentClientId }\n\t\t\tref={ nodeRef }\n\t\t\t{ ...showMoversGestures }\n\t\t>\n\t\t\t<ToolbarButton\n\t\t\t\tclassName=\"block-editor-block-parent-selector__button\"\n\t\t\t\tonClick={ () => selectBlock( firstParentClientId ) }\n\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t\t__( 'Select %s' ),\n\t\t\t\t\tblockInformation.title\n\t\t\t\t) }\n\t\t\t\tshowTooltip\n\t\t\t\ticon={ <BlockIcon icon={ blockInformation.icon } /> }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n"]}