{"version":3,"sources":["@wordpress/block-library/src/template-part/edit/placeholder/index.js"],"names":["TemplatePartPlaceholder","area","setAttributes","innerBlocks","coreStore","saveEntityRecord","onCreate","title","record","slug","content","templatePart","theme","undefined","blockDefault","isOpen","onToggle","onClose"],"mappings":";;;;;;;;;AAIA;;;;;;AADA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AAdA;AACA;AACA;;AASA;AACA;AACA;AAGe,SAASA,uBAAT,OAIX;AAAA,MAHHC,IAGG,QAHHA,IAGG;AAAA,MAFHC,aAEG,QAFHA,aAEG;AAAA,MADHC,WACG,QADHA,WACG;;AAAA,qBAC0B,uBAAaC,eAAb,CAD1B;AAAA,MACKC,gBADL,gBACKA,gBADL;;AAEH,MAAMC,QAAQ,GAAG,gHAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBC,YAAAA,KADuB,GACf,cAAI,wBAAJ,CADe,EAE7B;AACA;AACA;AACA;;AACMC,YAAAA,MANuB,GAMd;AACdD,cAAAA,KAAK,EAALA,KADc;AAEdE,cAAAA,IAAI,EAAE,eAFQ;AAGdC,cAAAA,OAAO,EAAE,uBAAWP,WAAX,CAHK;AAId;AACA;AACAF,cAAAA,IAAI,EAAJA;AANc,aANc;AAAA;AAAA,mBAcFI,gBAAgB,CAC1C,UAD0C,EAE1C,kBAF0C,EAG1CG,MAH0C,CAdd;;AAAA;AAcvBG,YAAAA,YAduB;AAmB7BT,YAAAA,aAAa,CAAE;AACdO,cAAAA,IAAI,EAAEE,YAAY,CAACF,IADL;AAEdG,cAAAA,KAAK,EAAED,YAAY,CAACC,KAFN;AAGdX,cAAAA,IAAI,EAAEY;AAHQ,aAAF,CAAb;;AAnB6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb,IAwBd,CAAEX,aAAF,EAAiBD,IAAjB,CAxBc,CAAjB;AA0BA,SACC,4BAAC,uBAAD;AACC,IAAA,IAAI,EAAGa,mBADR;AAEC,IAAA,KAAK,EAAG,cAAI,eAAJ,CAFT;AAGC,IAAA,YAAY,EAAG,cACd,mEADc;AAHhB,KAOC,4BAAC,oBAAD;AACC,IAAA,gBAAgB,EAAC,8DADlB;AAEC,IAAA,QAAQ,EAAC,mBAFV;AAGC,IAAA,YAAY,EAAG;AAAA,UAAIC,MAAJ,SAAIA,MAAJ;AAAA,UAAYC,QAAZ,SAAYA,QAAZ;AAAA,aACd,qDACC,4BAAC,kBAAD;AACC,QAAA,SAAS,MADV;AAEC,QAAA,OAAO,EAAGA,QAFX;AAGC,yBAAgBD;AAHjB,SAKG,cAAI,iBAAJ,CALH,CADD,EAQC,4BAAC,kBAAD;AAAQ,QAAA,UAAU,MAAlB;AAAmB,QAAA,OAAO,EAAGT;AAA7B,SACG,cAAI,mBAAJ,CADH,CARD,CADc;AAAA,KAHhB;AAiBC,IAAA,aAAa,EAAG;AAAA,UAAIW,OAAJ,SAAIA,OAAJ;AAAA,aACf,4BAAC,kBAAD;AACC,QAAA,aAAa,EAAGf,aADjB;AAEC,QAAA,OAAO,EAAGe;AAFX,QADe;AAAA;AAjBjB,IAPD,CADD;AAkCA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { Placeholder, Dropdown, Button } from '@wordpress/components';\nimport { blockDefault } from '@wordpress/icons';\nimport { serialize } from '@wordpress/blocks';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport TemplatePartSelection from '../selection';\n\nexport default function TemplatePartPlaceholder( {\n\tarea,\n\tsetAttributes,\n\tinnerBlocks,\n} ) {\n\tconst { saveEntityRecord } = useDispatch( coreStore );\n\tconst onCreate = useCallback( async () => {\n\t\tconst title = __( 'Untitled Template Part' );\n\t\t// If we have `area` set from block attributes, means an exposed\n\t\t// block variation was inserted. So add this prop to the template\n\t\t// part entity on creation. Afterwards remove `area` value from\n\t\t// block attributes.\n\t\tconst record = {\n\t\t\ttitle,\n\t\t\tslug: 'template-part',\n\t\t\tcontent: serialize( innerBlocks ),\n\t\t\t// `area` is filterable on the server and defaults to `UNCATEGORIZED`\n\t\t\t// if provided value is not allowed.\n\t\t\tarea,\n\t\t};\n\t\tconst templatePart = await saveEntityRecord(\n\t\t\t'postType',\n\t\t\t'wp_template_part',\n\t\t\trecord\n\t\t);\n\t\tsetAttributes( {\n\t\t\tslug: templatePart.slug,\n\t\t\ttheme: templatePart.theme,\n\t\t\tarea: undefined,\n\t\t} );\n\t}, [ setAttributes, area ] );\n\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ blockDefault }\n\t\t\tlabel={ __( 'Template Part' ) }\n\t\t\tinstructions={ __(\n\t\t\t\t'Create a new template part or pick an existing one from the list.'\n\t\t\t) }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"wp-block-template-part__placeholder-preview-dropdown-content\"\n\t\t\t\tposition=\"bottom right left\"\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Choose existing' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button isTertiary onClick={ onCreate }>\n\t\t\t\t\t\t\t{ __( 'New template part' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t<TemplatePartSelection\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</Placeholder>\n\t);\n}\n"]}