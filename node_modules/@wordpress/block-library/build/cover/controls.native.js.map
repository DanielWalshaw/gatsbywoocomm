{"version":3,"sources":["@wordpress/block-library/src/cover/controls.native.js"],"names":["Controls","attributes","didUploadFail","hasOnlyColorBackground","isUploadInProgress","onClearMedia","onSelectMedia","setAttributes","backgroundType","dimRatio","hasParallax","focalPoint","minHeight","minHeightUnit","url","CONTAINER_HEIGHT","COVER_DEFAULT_HEIGHT","onHeightChange","value","onOpacityChange","onChangeUnit","nextUnit","Math","max","COVER_MIN_HEIGHT","displayPlaceholder","setDisplayPlaceholder","setFocalPoint","toggleParallax","undefined","IMAGE_DEFAULT_FOCAL_POINT","addMediaButtonStyle","styles","addMediaButton","addMediaButtonDark","focalPointPosition","x","y","left","top","videoNaturalSize","setVideoNaturalSize","videoRef","mediaBackground","mediaBackgroundDark","imagePreviewStyles","imagePlaceholder","videoPreviewStyles","aspectRatio","width","height","opacity","video","focalPointHint","plus","renderMediaSection","openMediaOptions","open","getMediaOptions","mediaPreview","mediaInner","IMAGE_BACKGROUND_TYPE","destructiveButton","id","label","onPress","separated","image","VIDEO_BACKGROUND_TYPE","event","naturalSize","current","seek","uri","clearMediaButton","ALLOWED_MEDIA_TYPES","overlayColor","customOverlayColor","gradient","customGradient","rangeCellContainer","COVER_MAX_HEIGHT","CSS_UNITS"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\nimport Video from 'react-native-video';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tImage,\n\tIcon,\n\tIMAGE_DEFAULT_FOCAL_POINT,\n\tPanelBody,\n\tRangeControl,\n\tUnitControl,\n\tTextControl,\n\tBottomSheet,\n\tToggleControl,\n} from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\nimport { useState, useCallback, useRef } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { MediaUpload } from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport OverlayColorSettings from './overlay-color-settings';\nimport FocalPointSettingsButton from './focal-point-settings-button';\nimport {\n\tALLOWED_MEDIA_TYPES,\n\tCOVER_MIN_HEIGHT,\n\tCOVER_MAX_HEIGHT,\n\tCOVER_DEFAULT_HEIGHT,\n\tCSS_UNITS,\n\tIMAGE_BACKGROUND_TYPE,\n\tVIDEO_BACKGROUND_TYPE,\n} from './shared';\n\nfunction Controls( {\n\tattributes,\n\tdidUploadFail,\n\thasOnlyColorBackground,\n\tisUploadInProgress,\n\tonClearMedia,\n\tonSelectMedia,\n\tsetAttributes,\n} ) {\n\tconst {\n\t\tbackgroundType,\n\t\tdimRatio,\n\t\thasParallax,\n\t\tfocalPoint,\n\t\tminHeight,\n\t\tminHeightUnit = 'px',\n\t\turl,\n\t} = attributes;\n\tconst CONTAINER_HEIGHT = minHeight || COVER_DEFAULT_HEIGHT;\n\tconst onHeightChange = useCallback(\n\t\t( value ) => {\n\t\t\tif ( minHeight || value !== COVER_DEFAULT_HEIGHT ) {\n\t\t\t\tsetAttributes( { minHeight: value } );\n\t\t\t}\n\t\t},\n\t\t[ minHeight ]\n\t);\n\n\tconst onOpacityChange = useCallback( ( value ) => {\n\t\tsetAttributes( { dimRatio: value } );\n\t}, [] );\n\n\tconst onChangeUnit = useCallback( ( nextUnit ) => {\n\t\tsetAttributes( {\n\t\t\tminHeightUnit: nextUnit,\n\t\t\tminHeight:\n\t\t\t\tnextUnit === 'px'\n\t\t\t\t\t? Math.max( CONTAINER_HEIGHT, COVER_MIN_HEIGHT )\n\t\t\t\t\t: CONTAINER_HEIGHT,\n\t\t} );\n\t}, [] );\n\n\tconst [ displayPlaceholder, setDisplayPlaceholder ] = useState( true );\n\n\tfunction setFocalPoint( value ) {\n\t\tsetAttributes( { focalPoint: value } );\n\t}\n\n\tconst toggleParallax = () => {\n\t\tsetAttributes( {\n\t\t\thasParallax: ! hasParallax,\n\t\t\t...( ! hasParallax\n\t\t\t\t? { focalPoint: undefined }\n\t\t\t\t: { focalPoint: IMAGE_DEFAULT_FOCAL_POINT } ),\n\t\t} );\n\t};\n\n\tconst addMediaButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.addMediaButton,\n\t\tstyles.addMediaButtonDark\n\t);\n\n\tfunction focalPointPosition( { x, y } = IMAGE_DEFAULT_FOCAL_POINT ) {\n\t\treturn {\n\t\t\tleft: `${ ( hasParallax ? 0.5 : x ) * 100 }%`,\n\t\t\ttop: `${ ( hasParallax ? 0.5 : y ) * 100 }%`,\n\t\t};\n\t}\n\n\tconst [ videoNaturalSize, setVideoNaturalSize ] = useState( null );\n\tconst videoRef = useRef( null );\n\n\tconst mediaBackground = usePreferredColorSchemeStyle(\n\t\tstyles.mediaBackground,\n\t\tstyles.mediaBackgroundDark\n\t);\n\tconst imagePreviewStyles = [\n\t\tdisplayPlaceholder && styles.imagePlaceholder,\n\t];\n\tconst videoPreviewStyles = [\n\t\t{\n\t\t\taspectRatio:\n\t\t\t\tvideoNaturalSize &&\n\t\t\t\tvideoNaturalSize.width / videoNaturalSize.height,\n\t\t\t// Hide Video component since it has black background while loading the source\n\t\t\topacity: displayPlaceholder ? 0 : 1,\n\t\t},\n\t\tstyles.video,\n\t\tdisplayPlaceholder && styles.imagePlaceholder,\n\t];\n\n\tconst focalPointHint = ! hasParallax && ! displayPlaceholder && (\n\t\t<Icon\n\t\t\ticon={ plus }\n\t\t\tsize={ styles.focalPointHint?.width }\n\t\t\tstyle={ [\n\t\t\t\tstyles.focalPointHint,\n\t\t\t\tfocalPointPosition( focalPoint ),\n\t\t\t] }\n\t\t/>\n\t);\n\n\tconst renderMediaSection = ( {\n\t\topen: openMediaOptions,\n\t\tgetMediaOptions,\n\t} ) => (\n\t\t<>\n\t\t\t{ getMediaOptions() }\n\t\t\t{ url ? (\n\t\t\t\t<>\n\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\taccessible={ false }\n\t\t\t\t\t\tcellContainerStyle={ [\n\t\t\t\t\t\t\tstyles.mediaPreview,\n\t\t\t\t\t\t\tmediaBackground,\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonLongPress={ openMediaOptions }\n\t\t\t\t\t>\n\t\t\t\t\t\t<View style={ styles.mediaInner }>\n\t\t\t\t\t\t\t{ IMAGE_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\teditButton={ ! displayPlaceholder }\n\t\t\t\t\t\t\t\t\thighlightSelected={ false }\n\t\t\t\t\t\t\t\t\tisSelected={ ! displayPlaceholder }\n\t\t\t\t\t\t\t\t\tisUploadFailed={ didUploadFail }\n\t\t\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\t\t\t\tmediaPickerOptions={ [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdestructiveButton: true,\n\t\t\t\t\t\t\t\t\t\t\tid: 'clearMedia',\n\t\t\t\t\t\t\t\t\t\t\tlabel: __( 'Clear Media' ),\n\t\t\t\t\t\t\t\t\t\t\tonPress: onClearMedia,\n\t\t\t\t\t\t\t\t\t\t\tseparated: true,\n\t\t\t\t\t\t\t\t\t\t\tvalue: 'clearMedia',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\tonImageDataLoad={ () => {\n\t\t\t\t\t\t\t\t\t\tsetDisplayPlaceholder( false );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tonSelectMediaUploadOption={ onSelectMedia }\n\t\t\t\t\t\t\t\t\topenMediaOptions={ openMediaOptions }\n\t\t\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\t\t\t\tstyle={ imagePreviewStyles }\n\t\t\t\t\t\t\t\t\twidth={ styles.image?.width }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ VIDEO_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\t\tmuted\n\t\t\t\t\t\t\t\t\tpaused\n\t\t\t\t\t\t\t\t\tdisableFocus\n\t\t\t\t\t\t\t\t\tonLoadStart={ () => {\n\t\t\t\t\t\t\t\t\t\tsetDisplayPlaceholder( true );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tonLoad={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\t\t\t} = event.naturalSize;\n\t\t\t\t\t\t\t\t\t\tsetVideoNaturalSize( {\n\t\t\t\t\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\tsetDisplayPlaceholder( false );\n\t\t\t\t\t\t\t\t\t\t// Avoid invisible, paused video on Android, presumably\n\t\t\t\t\t\t\t\t\t\t// related to https://git.io/Jt6Dr\n\t\t\t\t\t\t\t\t\t\tvideoRef?.current.seek( 0 );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tref={ videoRef }\n\t\t\t\t\t\t\t\t\tresizeMode={ 'cover' }\n\t\t\t\t\t\t\t\t\tsource={ { uri: url } }\n\t\t\t\t\t\t\t\t\tstyle={ videoPreviewStyles }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ displayPlaceholder ? null : focalPointHint }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</BottomSheet.Cell>\n\t\t\t\t\t<FocalPointSettingsButton\n\t\t\t\t\t\tdisabled={ hasParallax }\n\t\t\t\t\t\tfocalPoint={ focalPoint || IMAGE_DEFAULT_FOCAL_POINT }\n\t\t\t\t\t\tonFocalPointChange={ setFocalPoint }\n\t\t\t\t\t\turl={ url }\n\t\t\t\t\t/>\n\t\t\t\t\t{ IMAGE_BACKGROUND_TYPE === backgroundType && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Fixed background' ) }\n\t\t\t\t\t\t\tchecked={ hasParallax }\n\t\t\t\t\t\t\tonChange={ toggleParallax }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tleftAlign\n\t\t\t\t\t\tlabel={ __( 'Clear Media' ) }\n\t\t\t\t\t\tlabelStyle={ styles.clearMediaButton }\n\t\t\t\t\t\tonPress={ onClearMedia }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<TextControl\n\t\t\t\t\taccessibilityLabel={ __( 'Add image or video' ) }\n\t\t\t\t\tlabel={ __( 'Add image or video' ) }\n\t\t\t\t\tlabelStyle={ addMediaButtonStyle }\n\t\t\t\t\tleftAlign\n\t\t\t\t\tonPress={ openMediaOptions }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<PanelBody title={ __( 'Media' ) }>\n\t\t\t\t<MediaUpload\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tisReplacingMedia={ ! hasOnlyColorBackground }\n\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\trender={ renderMediaSection }\n\t\t\t\t/>\n\t\t\t</PanelBody>\n\n\t\t\t<OverlayColorSettings\n\t\t\t\toverlayColor={ attributes.overlayColor }\n\t\t\t\tcustomOverlayColor={ attributes.customOverlayColor }\n\t\t\t\tgradient={ attributes.gradient }\n\t\t\t\tcustomGradient={ attributes.customGradient }\n\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t/>\n\n\t\t\t{ url ? (\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Opacity' ) }\n\t\t\t\t\t\tminimumValue={ 0 }\n\t\t\t\t\t\tmaximumValue={ 100 }\n\t\t\t\t\t\tvalue={ dimRatio }\n\t\t\t\t\t\tonChange={ onOpacityChange }\n\t\t\t\t\t\tstyle={ styles.rangeCellContainer }\n\t\t\t\t\t\tseparatorType={ 'topFullWidth' }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t) : null }\n\n\t\t\t<PanelBody title={ __( 'Dimensions' ) }>\n\t\t\t\t<UnitControl\n\t\t\t\t\tlabel={ __( 'Minimum height' ) }\n\t\t\t\t\tmin={ minHeightUnit === 'px' ? COVER_MIN_HEIGHT : 1 }\n\t\t\t\t\tmax={ COVER_MAX_HEIGHT }\n\t\t\t\t\tunit={ minHeightUnit }\n\t\t\t\t\tvalue={ CONTAINER_HEIGHT }\n\t\t\t\t\tonChange={ onHeightChange }\n\t\t\t\t\tonUnitChange={ onChangeUnit }\n\t\t\t\t\tunits={ CSS_UNITS }\n\t\t\t\t\tstyle={ styles.rangeCellContainer }\n\t\t\t\t\tkey={ minHeightUnit }\n\t\t\t\t/>\n\t\t\t</PanelBody>\n\t\t</>\n\t);\n}\n\nexport default Controls;\n"]}