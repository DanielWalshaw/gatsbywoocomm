{"version":3,"sources":["@wordpress/block-library/src/cover/shared.js"],"names":["POSITION_CLASSNAMES","center","IMAGE_BACKGROUND_TYPE","VIDEO_BACKGROUND_TYPE","COVER_MIN_HEIGHT","COVER_MAX_HEIGHT","COVER_DEFAULT_HEIGHT","backgroundImageStyles","url","backgroundImage","ALLOWED_MEDIA_TYPES","isWeb","Platform","OS","CSS_UNITS","value","label","default","dimRatioToClass","ratio","Math","round","attributesFromMedia","setAttributes","media","undefined","id","type","mediaType","media_type","backgroundType","focalPoint","hasParallax","isContentPositionCenter","contentPosition","getPositionClassName"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlobTypeByURL, isBlobURL } from '@wordpress/blob';\nimport { __ } from '@wordpress/i18n';\nimport { Platform } from '@wordpress/element';\n\nconst POSITION_CLASSNAMES = {\n\t'top left': 'is-position-top-left',\n\t'top center': 'is-position-top-center',\n\t'top right': 'is-position-top-right',\n\t'center left': 'is-position-center-left',\n\t'center center': 'is-position-center-center',\n\tcenter: 'is-position-center-center',\n\t'center right': 'is-position-center-right',\n\t'bottom left': 'is-position-bottom-left',\n\t'bottom center': 'is-position-bottom-center',\n\t'bottom right': 'is-position-bottom-right',\n};\n\nexport const IMAGE_BACKGROUND_TYPE = 'image';\nexport const VIDEO_BACKGROUND_TYPE = 'video';\nexport const COVER_MIN_HEIGHT = 50;\nexport const COVER_MAX_HEIGHT = 1000;\nexport const COVER_DEFAULT_HEIGHT = 300;\nexport function backgroundImageStyles( url ) {\n\treturn url ? { backgroundImage: `url(${ url })` } : {};\n}\nexport const ALLOWED_MEDIA_TYPES = [ 'image', 'video' ];\n\nconst isWeb = Platform.OS === 'web';\n\nexport const CSS_UNITS = [\n\t{\n\t\tvalue: 'px',\n\t\tlabel: isWeb ? 'px' : __( 'Pixels (px)' ),\n\t\tdefault: '430',\n\t},\n\t{\n\t\tvalue: 'em',\n\t\tlabel: isWeb ? 'em' : __( 'Relative to parent font size (em)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'rem',\n\t\tlabel: isWeb ? 'rem' : __( 'Relative to root font size (rem)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'vw',\n\t\tlabel: isWeb ? 'vw' : __( 'Viewport width (vw)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'vh',\n\t\tlabel: isWeb ? 'vh' : __( 'Viewport height (vh)' ),\n\t\tdefault: '50',\n\t},\n];\n\nexport function dimRatioToClass( ratio ) {\n\treturn ratio === 0 || ratio === 50 || ! ratio\n\t\t? null\n\t\t: 'has-background-dim-' + 10 * Math.round( ratio / 10 );\n}\n\nexport function attributesFromMedia( setAttributes ) {\n\treturn ( media ) => {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tsetAttributes( { url: undefined, id: undefined } );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\tmedia.type = getBlobTypeByURL( media.url );\n\t\t}\n\n\t\tlet mediaType;\n\t\t// for media selections originated from a file upload.\n\t\tif ( media.media_type ) {\n\t\t\tif ( media.media_type === IMAGE_BACKGROUND_TYPE ) {\n\t\t\t\tmediaType = IMAGE_BACKGROUND_TYPE;\n\t\t\t} else {\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\n\t\t\t\t// Videos contain the media type of 'file' in the object returned from the rest api.\n\t\t\t\tmediaType = VIDEO_BACKGROUND_TYPE;\n\t\t\t}\n\t\t} else {\n\t\t\t// for media selections originated from existing files in the media library.\n\t\t\tif (\n\t\t\t\tmedia.type !== IMAGE_BACKGROUND_TYPE &&\n\t\t\t\tmedia.type !== VIDEO_BACKGROUND_TYPE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmediaType = media.type;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\turl: media.url,\n\t\t\tid: media.id,\n\t\t\tbackgroundType: mediaType,\n\t\t\t...( mediaType === VIDEO_BACKGROUND_TYPE\n\t\t\t\t? { focalPoint: undefined, hasParallax: undefined }\n\t\t\t\t: {} ),\n\t\t} );\n\t};\n}\n\n/**\n * Checks of the contentPosition is the center (default) position.\n *\n * @param {string} contentPosition The current content position.\n * @return {boolean} Whether the contentPosition is center.\n */\nexport function isContentPositionCenter( contentPosition ) {\n\treturn (\n\t\t! contentPosition ||\n\t\tcontentPosition === 'center center' ||\n\t\tcontentPosition === 'center'\n\t);\n}\n\n/**\n * Retrieves the className for the current contentPosition.\n * The default position (center) will not have a className.\n *\n * @param {string} contentPosition The current content position.\n * @return {string} The className assigned to the contentPosition.\n */\nexport function getPositionClassName( contentPosition ) {\n\t/*\n\t * Only render a className if the contentPosition is not center (the default).\n\t */\n\tif ( isContentPositionCenter( contentPosition ) ) return '';\n\n\treturn POSITION_CLASSNAMES[ contentPosition ];\n}\n"]}