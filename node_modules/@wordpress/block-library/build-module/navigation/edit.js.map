{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["classnames","useState","InnerBlocks","__experimentalUseInnerBlocksProps","useInnerBlocksProps","InspectorControls","JustifyToolbar","BlockControls","useBlockProps","store","blockEditorStore","useDispatch","withSelect","withDispatch","PanelBody","ToggleControl","ToolbarGroup","compose","__","useBlockNavigator","NavigationPlaceholder","PlaceholderPreview","ALLOWED_BLOCKS","LAYOUT","type","alignments","Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","hasSubmenuIndicatorSetting","hasItemJustificationControls","isPlaceholderShown","setIsPlaceholderShown","selectBlock","blockProps","itemsJustification","orientation","navigatorToolbarButton","navigatorModal","innerBlocksProps","allowedBlocks","renderAppender","DefaultAppender","__experimentalAppenderTagName","__experimentalCaptureToolbars","templateLock","__experimentalLayout","placeholder","blocks","selectNavigationBlock","justifyAllowedControls","value","position","isAlternate","showSubmenuIcon","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tJustifyToolbar,\n\tBlockControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\n\nimport NavigationPlaceholder from './placeholder';\nimport PlaceholderPreview from './placeholder-preview';\n\nconst ALLOWED_BLOCKS = [\n\t'core/navigation-link',\n\t'core/search',\n\t'core/social-links',\n\t'core/page-list',\n\t'core/spacer',\n];\n\nconst LAYOUT = {\n\ttype: 'default',\n\talignments: [],\n};\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = true,\n} ) {\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classnames( className, {\n\t\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t\t'is-vertical': attributes.orientation === 'vertical',\n\t\t} ),\n\t} );\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-navigation__container',\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\t\torientation: attributes.orientation || 'horizontal',\n\t\t\trenderAppender:\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\tisSelected\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalAppenderTagName: 'li',\n\t\t\t__experimentalCaptureToolbars: true,\n\t\t\t// Template lock set to false here so that the Nav\n\t\t\t// Block on the experimental menus screen does not\n\t\t\t// inherit templateLock={ 'all' }.\n\t\t\ttemplateLock: false,\n\t\t\t__experimentalLayout: LAYOUT,\n\t\t\tplaceholder: <PlaceholderPreview />,\n\t\t}\n\t);\n\n\tif ( isPlaceholderShown ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst justifyAllowedControls =\n\t\tattributes.orientation === 'vertical'\n\t\t\t? [ 'left', 'center', 'right' ]\n\t\t\t: [ 'left', 'center', 'right', 'space-between' ];\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<JustifyToolbar\n\t\t\t\t\t\tvalue={ attributes.itemsJustification }\n\t\t\t\t\t\tallowedControls={ justifyAllowedControls }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { itemsJustification: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\t\t\tisAlternate: true,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ul { ...innerBlocksProps } />\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( blockEditorStore ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( blockEditorStore );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( blockEditorStore ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}