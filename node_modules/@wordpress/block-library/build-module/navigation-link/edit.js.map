{"version":3,"sources":["@wordpress/block-library/src/navigation-link/edit.js"],"names":["classnames","escape","createBlock","useSelect","useDispatch","KeyboardShortcuts","PanelBody","Popover","TextControl","TextareaControl","ToolbarButton","ToolbarGroup","rawShortcut","displayShortcut","__","sprintf","BlockControls","InnerBlocks","__experimentalUseInnerBlocksProps","useInnerBlocksProps","InspectorControls","RichText","__experimentalLinkControl","LinkControl","useBlockProps","store","blockEditorStore","isURL","prependHTTP","Fragment","useState","useEffect","useRef","createInterpolateElement","placeCaretAtHorizontalEdge","link","linkIcon","addSubmenu","coreStore","ItemSubmenuIcon","ALLOWED_BLOCKS","MAX_NESTING","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","getSuggestionsQuery","type","kind","subtype","NavigationLinkEdit","attributes","isSelected","setAttributes","insertBlocksAfter","mergeBlocks","onReplace","context","clientId","label","opensInNewTab","url","description","rel","title","textColor","backgroundColor","style","showSubmenuIcon","saveEntityRecord","insertBlock","isLinkOpen","setIsLinkOpen","listItemRef","itemLabelPlaceholder","ref","select","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","getBlockParentsByBlockName","selectedBlockId","descendants","length","isAtMaxNesting","name","isParentOfSelectedBlock","isImmediateParentOfSelectedBlock","hasDescendants","selectedBlockHasDescendants","numberOfDescendants","userCanCreatePages","canUser","userCanCreatePosts","insertLinkBlock","insertionPoint","blockToInsert","test","selectLabelText","focus","defaultView","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","userCanCreate","handleCreate","pageTitle","postType","status","page","id","rendered","blockProps","className","color","text","background","onClick","innerBlocksProps","allowedBlocks","renderAppender","DefaultAppender","__experimentalAppenderTagName","classes","missingText","primary","descriptionValue","titleValue","relValue","enter","labelValue","searchTerm","format","mark","newTitle","newURL","newOpensInNewTab","newKind","newType","encodeURI","normalizedTitle","replace","normalizedURL"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { escape } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tKeyboardShortcuts,\n\tPanelBody,\n\tPopover,\n\tTextControl,\n\tTextareaControl,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tBlockControls,\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tRichText,\n\t__experimentalLinkControl as LinkControl,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n\tFragment,\n\tuseState,\n\tuseEffect,\n\tuseRef,\n\tcreateInterpolateElement,\n} from '@wordpress/element';\nimport { placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { link as linkIcon, addSubmenu } from '@wordpress/icons';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { ItemSubmenuIcon } from './icons';\nimport { name } from './block.json';\n\nconst ALLOWED_BLOCKS = [ 'core/navigation-link', 'core/spacer' ];\n\nconst MAX_NESTING = 5;\n\n/**\n * A React hook to determine if it's dragging within the target element.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\n *\n * @return {boolean} Is dragging within the target element.\n */\nconst useIsDraggingWithin = ( elementRef ) => {\n\tconst [ isDraggingWithin, setIsDraggingWithin ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst { ownerDocument } = elementRef.current;\n\n\t\tfunction handleDragStart( event ) {\n\t\t\t// Check the first time when the dragging starts.\n\t\t\thandleDragEnter( event );\n\t\t}\n\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\n\t\tfunction handleDragEnd() {\n\t\t\tsetIsDraggingWithin( false );\n\t\t}\n\n\t\tfunction handleDragEnter( event ) {\n\t\t\t// Check if the current target is inside the item element.\n\t\t\tif ( elementRef.current.contains( event.target ) ) {\n\t\t\t\tsetIsDraggingWithin( true );\n\t\t\t} else {\n\t\t\t\tsetIsDraggingWithin( false );\n\t\t\t}\n\t\t}\n\n\t\t// Bind these events to the document to catch all drag events.\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that\n\t\t// doesn't work in Safari.\n\t\townerDocument.addEventListener( 'dragstart', handleDragStart );\n\t\townerDocument.addEventListener( 'dragend', handleDragEnd );\n\t\townerDocument.addEventListener( 'dragenter', handleDragEnter );\n\n\t\treturn () => {\n\t\t\townerDocument.removeEventListener( 'dragstart', handleDragStart );\n\t\t\townerDocument.removeEventListener( 'dragend', handleDragEnd );\n\t\t\townerDocument.removeEventListener( 'dragenter', handleDragEnter );\n\t\t};\n\t}, [] );\n\n\treturn isDraggingWithin;\n};\n\n/**\n * Given the Link block's type attribute, return the query params to give to\n * /wp/v2/search.\n *\n * @param {string} type Link block's type attribute.\n * @param {string} kind Link block's entity of kind (post-type|taxonomy)\n * @return {{ type?: string, subtype?: string }} Search query params.\n */\nfunction getSuggestionsQuery( type, kind ) {\n\tswitch ( type ) {\n\t\tcase 'post':\n\t\tcase 'page':\n\t\t\treturn { type: 'post', subtype: type };\n\t\tcase 'category':\n\t\t\treturn { type: 'term', subtype: 'category' };\n\t\tcase 'tag':\n\t\t\treturn { type: 'term', subtype: 'post_tag' };\n\t\tcase 'post_format':\n\t\t\treturn { type: 'post-format' };\n\t\tdefault:\n\t\t\tif ( kind === 'taxonomy' ) {\n\t\t\t\treturn { type: 'term', subtype: type };\n\t\t\t}\n\t\t\tif ( kind === 'post-type' ) {\n\t\t\t\treturn { type: 'post', subtype: type };\n\t\t\t}\n\t\t\treturn {};\n\t}\n}\n\nexport default function NavigationLinkEdit( {\n\tattributes,\n\tisSelected,\n\tsetAttributes,\n\tinsertBlocksAfter,\n\tmergeBlocks,\n\tonReplace,\n\tcontext,\n\tclientId,\n} ) {\n\tconst {\n\t\tlabel,\n\t\ttype,\n\t\topensInNewTab,\n\t\turl,\n\t\tdescription,\n\t\trel,\n\t\ttitle,\n\t\tkind,\n\t} = attributes;\n\tconst link = {\n\t\turl,\n\t\topensInNewTab,\n\t};\n\tconst { textColor, backgroundColor, style, showSubmenuIcon } = context;\n\tconst { saveEntityRecord } = useDispatch( coreStore );\n\tconst { insertBlock } = useDispatch( blockEditorStore );\n\tconst [ isLinkOpen, setIsLinkOpen ] = useState( false );\n\tconst listItemRef = useRef( null );\n\tconst isDraggingWithin = useIsDraggingWithin( listItemRef );\n\tconst itemLabelPlaceholder = __( 'Add link…' );\n\tconst ref = useRef();\n\n\tconst {\n\t\tisAtMaxNesting,\n\t\tisParentOfSelectedBlock,\n\t\tisImmediateParentOfSelectedBlock,\n\t\thasDescendants,\n\t\tselectedBlockHasDescendants,\n\t\tnumberOfDescendants,\n\t\tuserCanCreatePages,\n\t\tuserCanCreatePosts,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetClientIdsOfDescendants,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetBlockParentsByBlockName,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockId = getSelectedBlockClientId();\n\n\t\t\tconst descendants = getClientIdsOfDescendants( [ clientId ] )\n\t\t\t\t.length;\n\n\t\t\treturn {\n\t\t\t\tisAtMaxNesting:\n\t\t\t\t\tgetBlockParentsByBlockName( clientId, name ).length >=\n\t\t\t\t\tMAX_NESTING,\n\t\t\t\tisParentOfSelectedBlock: hasSelectedInnerBlock(\n\t\t\t\t\tclientId,\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\tisImmediateParentOfSelectedBlock: hasSelectedInnerBlock(\n\t\t\t\t\tclientId,\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t\thasDescendants: !! descendants,\n\t\t\t\tselectedBlockHasDescendants: !! getClientIdsOfDescendants( [\n\t\t\t\t\tselectedBlockId,\n\t\t\t\t] )?.length,\n\t\t\t\tnumberOfDescendants: descendants,\n\t\t\t\tuserCanCreatePages: select( coreStore ).canUser(\n\t\t\t\t\t'create',\n\t\t\t\t\t'pages'\n\t\t\t\t),\n\t\t\t\tuserCanCreatePosts: select( coreStore ).canUser(\n\t\t\t\t\t'create',\n\t\t\t\t\t'posts'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\t/**\n\t * Insert a link block when submenu is added.\n\t */\n\tfunction insertLinkBlock() {\n\t\tconst insertionPoint = numberOfDescendants;\n\t\tconst blockToInsert = createBlock( 'core/navigation-link' );\n\t\tinsertBlock( blockToInsert, insertionPoint, clientId );\n\t}\n\n\t// Show the LinkControl on mount if the URL is empty\n\t// ( When adding a new menu item)\n\t// This can't be done in the useState call because it conflicts\n\t// with the autofocus behavior of the BlockListBlock component.\n\tuseEffect( () => {\n\t\tif ( ! url ) {\n\t\t\tsetIsLinkOpen( true );\n\t\t}\n\t}, [] );\n\n\t/**\n\t * The hook shouldn't be necessary but due to a focus loss happening\n\t * when selecting a suggestion in the link popover, we force close on block unselection.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! isSelected ) {\n\t\t\tsetIsLinkOpen( false );\n\t\t}\n\t}, [ isSelected ] );\n\n\t// If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\n\tuseEffect( () => {\n\t\tif ( isLinkOpen && url ) {\n\t\t\t// Does this look like a URL and have something TLD-ish?\n\t\t\tif (\n\t\t\t\tisURL( prependHTTP( label ) ) &&\n\t\t\t\t/^.+\\.[a-z]+/.test( label )\n\t\t\t) {\n\t\t\t\t// Focus and select the label text.\n\t\t\t\tselectLabelText();\n\t\t\t} else {\n\t\t\t\t// Focus it (but do not select).\n\t\t\t\tplaceCaretAtHorizontalEdge( ref.current, true );\n\t\t\t}\n\t\t}\n\t}, [ url ] );\n\n\t/**\n\t * Focus the Link label text and select it.\n\t */\n\tfunction selectLabelText() {\n\t\tref.current.focus();\n\t\tconst { ownerDocument } = ref.current;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst selection = defaultView.getSelection();\n\t\tconst range = ownerDocument.createRange();\n\t\t// Get the range of the current ref contents so we can add this range to the selection.\n\t\trange.selectNodeContents( ref.current );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\t}\n\n\tlet userCanCreate = false;\n\tif ( ! type || type === 'page' ) {\n\t\tuserCanCreate = userCanCreatePages;\n\t} else if ( type === 'post' ) {\n\t\tuserCanCreate = userCanCreatePosts;\n\t}\n\n\tasync function handleCreate( pageTitle ) {\n\t\tconst postType = type || 'page';\n\n\t\tconst page = await saveEntityRecord( 'postType', postType, {\n\t\t\ttitle: pageTitle,\n\t\t\tstatus: 'draft',\n\t\t} );\n\n\t\treturn {\n\t\t\tid: page.id,\n\t\t\ttype: postType,\n\t\t\ttitle: page.title.rendered,\n\t\t\turl: page.link,\n\t\t\tkind: 'post-type',\n\t\t};\n\t}\n\n\tconst blockProps = useBlockProps( {\n\t\tref: listItemRef,\n\t\tclassName: classnames( {\n\t\t\t'is-editing': isSelected || isParentOfSelectedBlock,\n\t\t\t'is-dragging-within': isDraggingWithin,\n\t\t\t'has-link': !! url,\n\t\t\t'has-child': hasDescendants,\n\t\t\t'has-text-color': !! textColor || !! style?.color?.text,\n\t\t\t[ `has-${ textColor }-color` ]: !! textColor,\n\t\t\t'has-background': !! backgroundColor || !! style?.color?.background,\n\t\t\t[ `has-${ backgroundColor }-background-color` ]: !! backgroundColor,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: style?.color?.text,\n\t\t\tbackgroundColor: style?.color?.background,\n\t\t},\n\t} );\n\n\tif ( ! url ) {\n\t\tblockProps.onClick = () => setIsLinkOpen( true );\n\t}\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: classnames( 'wp-block-navigation-link__container', {\n\t\t\t\t'is-parent-of-selected-block': isParentOfSelectedBlock,\n\t\t\t} ),\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: ALLOWED_BLOCKS,\n\t\t\trenderAppender:\n\t\t\t\t( isSelected && hasDescendants ) ||\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\t// Show the appender while dragging to allow inserting element between item and the appender.\n\t\t\t\thasDescendants\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalAppenderTagName: 'li',\n\t\t}\n\t);\n\n\tconst classes = classnames( 'wp-block-navigation-link__content', {\n\t\t'wp-block-navigation-link__placeholder': ! url,\n\t} );\n\n\tlet missingText = '';\n\tswitch ( type ) {\n\t\tcase 'post':\n\t\t\t/* translators: label for missing post in navigation link block */\n\t\t\tmissingText = __( 'Select a post' );\n\t\t\tbreak;\n\t\tcase 'page':\n\t\t\t/* translators: label for missing page in navigation link block */\n\t\t\tmissingText = __( 'Select a page' );\n\t\t\tbreak;\n\t\tcase 'category':\n\t\t\t/* translators: label for missing category in navigation link block */\n\t\t\tmissingText = __( 'Select a category' );\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\t/* translators: label for missing tag in navigation link block */\n\t\t\tmissingText = __( 'Select a tag' );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t/* translators: label for missing values in navigation link block */\n\t\t\tmissingText = __( 'Add a link' );\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t[ rawShortcut.primary( 'k' ) ]: () =>\n\t\t\t\t\t\t\t\tsetIsLinkOpen( true ),\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tname=\"link\"\n\t\t\t\t\t\ticon={ linkIcon }\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'k' ) }\n\t\t\t\t\t\tonClick={ () => setIsLinkOpen( true ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isAtMaxNesting && (\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\tname=\"submenu\"\n\t\t\t\t\t\t\ticon={ addSubmenu }\n\t\t\t\t\t\t\ttitle={ __( 'Add submenu' ) }\n\t\t\t\t\t\t\tonClick={ insertLinkBlock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Link settings' ) }>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tvalue={ description || '' }\n\t\t\t\t\t\tonChange={ ( descriptionValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { description: descriptionValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Description' ) }\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'The description will be displayed in the menu if the current theme supports it.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tvalue={ title || '' }\n\t\t\t\t\t\tonChange={ ( titleValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: titleValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Link title' ) }\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tvalue={ rel || '' }\n\t\t\t\t\t\tonChange={ ( relValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { rel: relValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<li { ...blockProps }>\n\t\t\t\t{ /* eslint-disable jsx-a11y/anchor-is-valid */ }\n\t\t\t\t<a className={ classes }>\n\t\t\t\t\t{ /* eslint-enable */ }\n\t\t\t\t\t{ ! url ? (\n\t\t\t\t\t\t<div className=\"wp-block-navigation-link__placeholder-text\">\n\t\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t\tenter: () =>\n\t\t\t\t\t\t\t\t\t\tisSelected && setIsLinkOpen( true ),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ missingText }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tidentifier=\"label\"\n\t\t\t\t\t\t\tclassName=\"wp-block-navigation-link__label\"\n\t\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\t\tonChange={ ( labelValue ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { label: labelValue } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\t\t\tinsertBlocksAfter(\n\t\t\t\t\t\t\t\t\tcreateBlock( 'core/navigation-link' )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taria-label={ __( 'Navigation link text' ) }\n\t\t\t\t\t\t\tplaceholder={ itemLabelPlaceholder }\n\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\tallowedFormats={ [\n\t\t\t\t\t\t\t\t'core/bold',\n\t\t\t\t\t\t\t\t'core/italic',\n\t\t\t\t\t\t\t\t'core/image',\n\t\t\t\t\t\t\t\t'core/strikethrough',\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tif ( ! url ) {\n\t\t\t\t\t\t\t\t\tsetIsLinkOpen( true );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isLinkOpen && (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\t\tonClose={ () => setIsLinkOpen( false ) }\n\t\t\t\t\t\t\tanchorRef={ listItemRef.current }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t\tescape: () => setIsLinkOpen( false ),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\t\t\tvalue={ link }\n\t\t\t\t\t\t\t\tshowInitialSuggestions={ true }\n\t\t\t\t\t\t\t\twithCreateSuggestion={ userCanCreate }\n\t\t\t\t\t\t\t\tcreateSuggestion={ handleCreate }\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText={ ( searchTerm ) => {\n\t\t\t\t\t\t\t\t\tlet format;\n\t\t\t\t\t\t\t\t\tif ( type === 'post' ) {\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t\t\t\t\t\t\tformat = __(\n\t\t\t\t\t\t\t\t\t\t\t'Create draft post: <mark>%s</mark>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t\t\t\t\t\t\tformat = __(\n\t\t\t\t\t\t\t\t\t\t\t'Create draft page: <mark>%s</mark>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn createInterpolateElement(\n\t\t\t\t\t\t\t\t\t\tsprintf( format, searchTerm ),\n\t\t\t\t\t\t\t\t\t\t{ mark: <mark /> }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tnoDirectEntry={ !! type }\n\t\t\t\t\t\t\t\tnoURLSuggestion={ !! type }\n\t\t\t\t\t\t\t\tsuggestionsQuery={ getSuggestionsQuery(\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\tkind\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonChange={ ( {\n\t\t\t\t\t\t\t\t\ttitle: newTitle = '',\n\t\t\t\t\t\t\t\t\turl: newURL = '',\n\t\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tkind: newKind = '',\n\t\t\t\t\t\t\t\t\ttype: newType = '',\n\t\t\t\t\t\t\t\t} = {} ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\turl: encodeURI( newURL ),\n\t\t\t\t\t\t\t\t\t\tlabel: ( () => {\n\t\t\t\t\t\t\t\t\t\t\tconst normalizedTitle = newTitle.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t/http(s?):\\/\\//gi,\n\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tconst normalizedURL = newURL.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t/http(s?):\\/\\//gi,\n\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tnewTitle !== '' &&\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedTitle !==\n\t\t\t\t\t\t\t\t\t\t\t\t\tnormalizedURL &&\n\t\t\t\t\t\t\t\t\t\t\t\tlabel !== newTitle\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn escape( newTitle );\n\t\t\t\t\t\t\t\t\t\t\t} else if ( label ) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn label;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// If there's no label, add the URL.\n\t\t\t\t\t\t\t\t\t\t\treturn escape( normalizedURL );\n\t\t\t\t\t\t\t\t\t\t} )(),\n\t\t\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t...( newKind && {\n\t\t\t\t\t\t\t\t\t\t\tkind: newKind,\n\t\t\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t\t\t...( newType &&\n\t\t\t\t\t\t\t\t\t\t\tnewType !== 'URL' &&\n\t\t\t\t\t\t\t\t\t\t\tnewType !== 'post-format' && {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: newType,\n\t\t\t\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) }\n\t\t\t\t</a>\n\t\t\t\t{ hasDescendants && showSubmenuIcon && (\n\t\t\t\t\t<span className=\"wp-block-navigation-link__submenu-icon\">\n\t\t\t\t\t\t<ItemSubmenuIcon />\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t<ul { ...innerBlocksProps } />\n\t\t\t</li>\n\t\t</Fragment>\n\t);\n}\n"]}