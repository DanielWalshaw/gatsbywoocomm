{"version":3,"sources":["@wordpress/block-library/src/query/edit/block-setup/layout-step.js"],"names":["useSelect","useState","store","blocksStore","useInstanceId","BlockPreview","blockEditorStore","__","isRTL","Button","Icon","VisuallyHidden","__unstableComposite","Composite","__unstableUseCompositeState","useCompositeState","__unstableCompositeItem","CompositeItem","chevronRight","chevronLeft","LayoutSetupStep","blockType","onVariationSelect","onBlockPatternSelect","showBack","setShowBack","select","getBlockVariations","getDefaultBlockVariation","__experimentalGetPatternsByBlockTypes","name","_patterns","_blockVariations","defaultVariation","blockVariations","patterns","hasBlockVariations","length","showBlockVariations","setShowBlockVariations","composite","showPatternsList","map","variation","nextVariation","pattern","title","BlockPattern","onSelect","viewportWidth","blocks","descriptionId","description","undefined","BlockVariation","icon"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useInstanceId } from '@wordpress/compose';\nimport {\n\tBlockPreview,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __, isRTL } from '@wordpress/i18n';\nimport {\n\tButton,\n\tIcon,\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\nimport { chevronRight, chevronLeft } from '@wordpress/icons';\n\nconst LayoutSetupStep = ( {\n\tblockType,\n\tonVariationSelect,\n\tonBlockPatternSelect,\n} ) => {\n\tconst [ showBack, setShowBack ] = useState( false );\n\tconst {\n\t\tdefaultVariation,\n\t\tblockVariations,\n\t\tpatterns,\n\t\thasBlockVariations,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockVariations, getDefaultBlockVariation } = select(\n\t\t\t\tblocksStore\n\t\t\t);\n\t\t\tconst { __experimentalGetPatternsByBlockTypes } = select(\n\t\t\t\tblockEditorStore\n\t\t\t);\n\t\t\tconst { name } = blockType;\n\t\t\tconst _patterns = __experimentalGetPatternsByBlockTypes( name );\n\t\t\tconst _blockVariations = getBlockVariations( name, 'block' );\n\t\t\treturn {\n\t\t\t\tdefaultVariation: getDefaultBlockVariation( name, 'block' ),\n\t\t\t\tblockVariations: _blockVariations,\n\t\t\t\tpatterns: _patterns,\n\t\t\t\thasBlockVariations: !! _blockVariations?.length,\n\t\t\t};\n\t\t},\n\t\t[ blockType ]\n\t);\n\tconst [ showBlockVariations, setShowBlockVariations ] = useState(\n\t\t! patterns?.length && hasBlockVariations\n\t);\n\tconst composite = useCompositeState();\n\t// Show nothing if block variations and block pattterns do not exist.\n\tif ( ! hasBlockVariations && ! patterns?.length ) return null;\n\n\tconst showPatternsList = ! showBlockVariations && !! patterns.length;\n\treturn (\n\t\t<>\n\t\t\t{ showBack && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"block-setup-block-layout-back-button\"\n\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\tisTertiary\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetShowBack( false );\n\t\t\t\t\t\tsetShowBlockVariations( false );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Back' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t\t<Composite\n\t\t\t\t{ ...composite }\n\t\t\t\trole=\"listbox\"\n\t\t\t\tclassName=\"block-setup-block-layout-list__container\"\n\t\t\t\taria-label={ __( 'Layout list' ) }\n\t\t\t>\n\t\t\t\t{ showBlockVariations && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ blockVariations.map( ( variation ) => (\n\t\t\t\t\t\t\t<BlockVariation\n\t\t\t\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\t\t\t\tvariation={ variation }\n\t\t\t\t\t\t\t\tonSelect={ (\n\t\t\t\t\t\t\t\t\tnextVariation = defaultVariation\n\t\t\t\t\t\t\t\t) => onVariationSelect( nextVariation ) }\n\t\t\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ showPatternsList && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\n\t\t\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ ! showBlockVariations && hasBlockVariations && (\n\t\t\t\t\t<BlockVariation\n\t\t\t\t\t\tkey={ defaultVariation.name }\n\t\t\t\t\t\tvariation={ { title: __( 'Start empty' ) } }\n\t\t\t\t\t\tonSelect={ () => {\n\t\t\t\t\t\t\tsetShowBack( true );\n\t\t\t\t\t\t\tsetShowBlockVariations( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</Composite>\n\t\t</>\n\t);\n};\n\nfunction BlockPattern( { pattern, onSelect, composite } ) {\n\tconst { viewportWidth, blocks } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t'block-setup-block-layout-list__item-description'\n\t);\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-setup-block-layout-list__list-item\"\n\t\t\taria-label={ pattern.title }\n\t\t\taria-describedby={ pattern.description ? descriptionId : undefined }\n\t\t>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\tclassName=\"block-setup-block-layout-list__item\"\n\t\t\t\tonClick={ () => onSelect( blocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t/>\n\t\t\t</CompositeItem>\n\t\t\t<div className=\"block-setup-block-layout-list__item-title\">\n\t\t\t\t{ pattern.title }\n\t\t\t</div>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nfunction BlockVariation( { variation, onSelect, composite } ) {\n\tconst descriptionId = useInstanceId(\n\t\tBlockVariation,\n\t\t'block-setup-block-layout-list__item-description'\n\t);\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-setup-block-layout-list__list-item is-block-variation\"\n\t\t\taria-label={ variation.title }\n\t\t\taria-describedby={\n\t\t\t\tvariation.description ? descriptionId : undefined\n\t\t\t}\n\t\t>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\tclassName=\"block-setup-block-layout-list__item\"\n\t\t\t\tonClick={ () => onSelect( variation ) }\n\t\t\t\tlabel={ variation.description || variation.title }\n\t\t\t>\n\t\t\t\t{ variation.icon && (\n\t\t\t\t\t<div className=\"block-setup-block-layout-list__item-variation-icon\">\n\t\t\t\t\t\t<Icon icon={ variation.icon } size={ 48 } />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</CompositeItem>\n\t\t\t<div className=\"block-setup-block-layout-list__item-title\">\n\t\t\t\t{ variation.title }\n\t\t\t</div>\n\t\t\t{ !! variation.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ variation.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default LayoutSetupStep;\n"]}