{"version":3,"sources":["@wordpress/block-library/src/search/edit.native.js"],"names":["View","classnames","RichText","PlainText","useBlockProps","InspectorControls","PanelBody","SelectControl","ToggleControl","Icon","__","search","useRef","useEffect","useState","usePreferredColorSchemeStyle","styles","MIN_BUTTON_WIDTH","MARGINS","widthMargin","marginLeft","paddingLeft","BUTTON_OPTIONS","value","label","SearchEdit","onFocus","isSelected","attributes","setAttributes","className","blockWidth","isButtonSelected","setIsButtonSelected","isLabelSelected","setIsLabelSelected","isPlaceholderSelected","setIsPlaceholderSelected","isLongButton","setIsLongButton","buttonWidth","setButtonWidth","textInputRef","showLabel","buttonPosition","buttonUseIcon","placeholder","buttonText","hasTextInput","current","blur","maxButtonWidth","Math","floor","tempIsLongButton","onLayoutButton","nativeEvent","layout","width","getBlockClassNames","undefined","getSelectedButtonPositionLabel","option","blockProps","controls","position","isButtonInside","borderStyle","border","borderDark","inputStyle","plainTextInput","plainTextInputDark","placeholderStyle","plainTextPlaceholder","plainTextPlaceholderDark","searchBarStyle","searchBarContainer","flexDirection","getPlaceholderAccessibilityLabel","title","description","renderTextField","searchInputContainer","newVal","color","buttonPlaceholderText","renderButton","buttonContainer","buttonContainerWide","icon","richTextButton","html","richTextButtonCursor","searchBlockContainer","richTextLabel"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tPlainText,\n\tuseBlockProps,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n\tIcon,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\n/**\n * Constants\n */\nconst MIN_BUTTON_WIDTH = 75;\nconst MARGINS =\n\tstyles.widthMargin?.marginLeft + styles.widthMargin?.paddingLeft;\n\nconst BUTTON_OPTIONS = [\n\t{ value: 'button-inside', label: __( 'Button inside' ) },\n\t{ value: 'button-outside', label: __( 'Button outside' ) },\n\t{ value: 'no-button', label: __( 'No button' ) },\n];\n\nexport default function SearchEdit( {\n\tonFocus,\n\tisSelected,\n\tattributes,\n\tsetAttributes,\n\tclassName,\n\tblockWidth,\n} ) {\n\tconst [ isButtonSelected, setIsButtonSelected ] = useState( false );\n\tconst [ isLabelSelected, setIsLabelSelected ] = useState( false );\n\tconst [ isPlaceholderSelected, setIsPlaceholderSelected ] = useState(\n\t\ttrue\n\t);\n\tconst [ isLongButton, setIsLongButton ] = useState( false );\n\tconst [ buttonWidth, setButtonWidth ] = useState( MIN_BUTTON_WIDTH );\n\n\tconst textInputRef = useRef( null );\n\n\tconst {\n\t\tlabel,\n\t\tshowLabel,\n\t\tbuttonPosition,\n\t\tbuttonUseIcon,\n\t\tplaceholder,\n\t\tbuttonText,\n\t} = attributes;\n\n\t/*\n\t * Called when the value of isSelected changes. Blurs the PlainText component\n\t * used by the placeholder when this block loses focus.\n\t */\n\tuseEffect( () => {\n\t\tif ( hasTextInput() && isPlaceholderSelected && ! isSelected ) {\n\t\t\ttextInputRef.current.blur();\n\t\t}\n\t}, [ isSelected ] );\n\n\tuseEffect( () => {\n\t\tconst maxButtonWidth = Math.floor( blockWidth / 2 - MARGINS );\n\t\tconst tempIsLongButton = buttonWidth > maxButtonWidth;\n\n\t\t// Update this value only if it has changed to avoid flickering.\n\t\tif ( isLongButton !== tempIsLongButton ) {\n\t\t\tsetIsLongButton( tempIsLongButton );\n\t\t}\n\t}, [ blockWidth, buttonWidth ] );\n\n\tconst hasTextInput = () => {\n\t\treturn textInputRef && textInputRef.current;\n\t};\n\n\tconst onLayoutButton = ( { nativeEvent } ) => {\n\t\tconst { width } = nativeEvent?.layout;\n\n\t\tif ( width ) {\n\t\t\tsetButtonWidth( width );\n\t\t}\n\t};\n\n\tconst getBlockClassNames = () => {\n\t\treturn classnames(\n\t\t\tclassName,\n\t\t\t'button-inside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-inside'\n\t\t\t\t: undefined,\n\t\t\t'button-outside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-outside'\n\t\t\t\t: undefined,\n\t\t\t'no-button' === buttonPosition\n\t\t\t\t? 'wp-block-search__no-button'\n\t\t\t\t: undefined,\n\t\t\t'button-only' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-only'\n\t\t\t\t: undefined,\n\t\t\t! buttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__text-button'\n\t\t\t\t: undefined,\n\t\t\tbuttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__icon-button'\n\t\t\t\t: undefined\n\t\t);\n\t};\n\n\tconst getSelectedButtonPositionLabel = ( option ) => {\n\t\tswitch ( option ) {\n\t\t\tcase 'button-inside':\n\t\t\t\treturn __( 'Inside' );\n\t\t\tcase 'button-outside':\n\t\t\t\treturn __( 'Outside' );\n\t\t\tcase 'no-button':\n\t\t\t\treturn __( 'No button' );\n\t\t}\n\t};\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: getBlockClassNames(),\n\t} );\n\n\tconst controls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Search settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Hide search heading' ) }\n\t\t\t\t\tchecked={ ! showLabel }\n\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tshowLabel: ! showLabel,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Button position' ) }\n\t\t\t\t\tvalue={ getSelectedButtonPositionLabel( buttonPosition ) }\n\t\t\t\t\tonChange={ ( position ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tbuttonPosition: position,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ BUTTON_OPTIONS }\n\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t/>\n\t\t\t\t{ buttonPosition !== 'no-button' && (\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Use icon button' ) }\n\t\t\t\t\t\tchecked={ buttonUseIcon }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tbuttonUseIcon: ! buttonUseIcon,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst isButtonInside = buttonPosition === 'button-inside';\n\n\tconst borderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.border,\n\t\tstyles.borderDark\n\t);\n\n\tconst inputStyle = [\n\t\t! isButtonInside && borderStyle,\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextInput,\n\t\t\tstyles.plainTextInputDark\n\t\t),\n\t];\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.plainTextPlaceholder,\n\t\tstyles.plainTextPlaceholderDark\n\t);\n\n\tconst searchBarStyle = [\n\t\tstyles.searchBarContainer,\n\t\tisButtonInside && borderStyle,\n\t\tisLongButton && { flexDirection: 'column' },\n\t];\n\n\tconst getPlaceholderAccessibilityLabel = () => {\n\t\tconst title = __( 'Search input field.' );\n\t\tconst description = placeholder\n\t\t\t? `${ __( 'Current placeholder text is' ) } ${ placeholder }`\n\t\t\t: __( 'No custom placeholder set' );\n\t\treturn `${ title } ${ description }`;\n\t};\n\n\tconst renderTextField = () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ styles.searchInputContainer }\n\t\t\t\taccessible={ true }\n\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t'Double tap to edit placeholder text'\n\t\t\t\t) }\n\t\t\t\taccessibilityLabel={ getPlaceholderAccessibilityLabel() }\n\t\t\t>\n\t\t\t\t<PlainText\n\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\tisSelected={ isPlaceholderSelected }\n\t\t\t\t\tclassName=\"wp-block-search__input\"\n\t\t\t\t\tstyle={ inputStyle }\n\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\tellipsizeMode=\"tail\" // currently only works on ios\n\t\t\t\t\tlabel={ null }\n\t\t\t\t\tvalue={ placeholder }\n\t\t\t\t\tplaceholder={\n\t\t\t\t\t\tplaceholder ? undefined : __( 'Optional placeholder…' )\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( newVal ) =>\n\t\t\t\t\t\tsetAttributes( { placeholder: newVal } )\n\t\t\t\t\t}\n\t\t\t\t\tonFocus={ () => {\n\t\t\t\t\t\tsetIsPlaceholderSelected( true );\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t} }\n\t\t\t\t\tonBlur={ () => setIsPlaceholderSelected( false ) }\n\t\t\t\t\tplaceholderTextColor={ placeholderStyle?.color }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t};\n\n\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t// a `placeholder` as an empty string when `RichText` is focused,\n\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\tconst buttonPlaceholderText =\n\t\tisButtonSelected ||\n\t\t( ! isButtonSelected && buttonText && buttonText !== '' )\n\t\t\t? ''\n\t\t\t: __( 'Add button text' );\n\n\tconst renderButton = () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tstyles.buttonContainer,\n\t\t\t\t\tisLongButton && styles.buttonContainerWide,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t{ buttonUseIcon && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ search }\n\t\t\t\t\t\t{ ...styles.icon }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! buttonUseIcon && (\n\t\t\t\t\t<View\n\t\t\t\t\t\taccessible={ true }\n\t\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\t\taccessibilityHint={ __(\n\t\t\t\t\t\t\t'Double tap to edit button text'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\taccessibilityLabel={ `${ __(\n\t\t\t\t\t\t\t'Search button. Current button text is'\n\t\t\t\t\t\t) } ${ buttonText }` }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-search__button\"\n\t\t\t\t\t\t\tidentifier=\"text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tstyle={ styles.richTextButton }\n\t\t\t\t\t\t\tplaceholder={ buttonPlaceholderText }\n\t\t\t\t\t\t\tvalue={ buttonText }\n\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { buttonText: html } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tminWidth={ MIN_BUTTON_WIDTH }\n\t\t\t\t\t\t\tmaxWidth={ blockWidth - MARGINS }\n\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\tisSelected={ isButtonSelected }\n\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( false );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\tstyles.richTextButtonCursor?.color\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t};\n\n\treturn (\n\t\t<View\n\t\t\t{ ...blockProps }\n\t\t\tstyle={ styles.searchBlockContainer }\n\t\t\timportantForAccessibility={\n\t\t\t\tisSelected ? 'yes' : 'no-hide-descendants'\n\t\t\t}\n\t\t\taccessibilityElementsHidden={ isSelected ? false : true }\n\t\t>\n\t\t\t{ isSelected && controls }\n\n\t\t\t{ showLabel && (\n\t\t\t\t<View\n\t\t\t\t\taccessible={ true }\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessibilityHint={ __( 'Double tap to edit label text' ) }\n\t\t\t\t\taccessibilityLabel={ `${ __(\n\t\t\t\t\t\t'Search block label. Current text is'\n\t\t\t\t\t) } ${ label }` }\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tclassName=\"wp-block-search__label\"\n\t\t\t\t\t\tidentifier=\"text\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tstyle={ styles.richTextLabel }\n\t\t\t\t\t\tplaceholder={ __( 'Add label…' ) }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\tsetAttributes( { label: html } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelected={ isLabelSelected }\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tselectionColor={ styles.richTextButtonCursor?.color }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ ( 'button-inside' === buttonPosition ||\n\t\t\t\t'button-outside' === buttonPosition ) && (\n\t\t\t\t<View style={ searchBarStyle }>\n\t\t\t\t\t{ renderTextField() }\n\t\t\t\t\t{ renderButton() }\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ 'button-only' === buttonPosition && renderButton() }\n\t\t\t{ 'no-button' === buttonPosition && renderTextField() }\n\t\t</View>\n\t);\n}\n"]}