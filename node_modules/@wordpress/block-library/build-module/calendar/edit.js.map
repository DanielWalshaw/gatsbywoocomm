{"version":3,"sources":["@wordpress/block-library/src/calendar/edit.js"],"names":["moment","memoize","Disabled","useSelect","ServerSideRender","useBlockProps","store","editorStore","getYearMonth","date","momentDate","year","month","CalendarEdit","attributes","select","getEditedPostAttribute","postType","undefined"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,OAAP,MAAoB,QAApB;AAEA;AACA;AACA;;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,SAASC,aAAT,QAA8B,yBAA9B;AACA,SAASC,KAAK,IAAIC,WAAlB,QAAqC,mBAArC;AAEA,IAAMC,YAAY,GAAGP,OAAO,CAAE,UAAEQ,IAAF,EAAY;AACzC,MAAK,CAAEA,IAAP,EAAc;AACb,WAAO,EAAP;AACA;;AACD,MAAMC,UAAU,GAAGV,MAAM,CAAES,IAAF,CAAzB;AACA,SAAO;AACNE,IAAAA,IAAI,EAAED,UAAU,CAACC,IAAX,EADA;AAENC,IAAAA,KAAK,EAAEF,UAAU,CAACE,KAAX,KAAqB;AAFtB,GAAP;AAIA,CAT2B,CAA5B;AAWA,eAAe,SAASC,YAAT,OAAwC;AAAA,MAAfC,UAAe,QAAfA,UAAe;AACtD,MAAML,IAAI,GAAGN,SAAS,CAAE,UAAEY,MAAF,EAAc;AAAA,kBACFA,MAAM,CAAER,WAAF,CADJ;AAAA,QAC7BS,sBAD6B,WAC7BA,sBAD6B;;AAGrC,QAAMC,QAAQ,GAAGD,sBAAsB,CAAE,MAAF,CAAvC,CAHqC,CAIrC;AACA;AACA;;AACA,WAAOC,QAAQ,KAAK,MAAb,GACJD,sBAAsB,CAAE,MAAF,CADlB,GAEJE,SAFH;AAGA,GAVqB,EAUnB,EAVmB,CAAtB;AAYA,SACC,qBAAUb,aAAa,EAAvB,EACC,cAAC,QAAD,QACC,cAAC,gBAAD;AACC,IAAA,KAAK,EAAC,eADP;AAEC,IAAA,UAAU,kCAAQS,UAAR,GAAuBN,YAAY,CAAEC,IAAF,CAAnC;AAFX,IADD,CADD,CADD;AAUA","sourcesContent":["/**\n * External dependencies\n */\nimport moment from 'moment';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { Disabled } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport ServerSideRender from '@wordpress/server-side-render';\nimport { useBlockProps } from '@wordpress/block-editor';\nimport { store as editorStore } from '@wordpress/editor';\n\nconst getYearMonth = memoize( ( date ) => {\n\tif ( ! date ) {\n\t\treturn {};\n\t}\n\tconst momentDate = moment( date );\n\treturn {\n\t\tyear: momentDate.year(),\n\t\tmonth: momentDate.month() + 1,\n\t};\n} );\n\nexport default function CalendarEdit( { attributes } ) {\n\tconst date = useSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute } = select( editorStore );\n\n\t\tconst postType = getEditedPostAttribute( 'type' );\n\t\t// Dates are used to overwrite year and month used on the calendar.\n\t\t// This overwrite should only happen for 'post' post types.\n\t\t// For other post types the calendar always displays the current month.\n\t\treturn postType === 'post'\n\t\t\t? getEditedPostAttribute( 'date' )\n\t\t\t: undefined;\n\t}, [] );\n\n\treturn (\n\t\t<div { ...useBlockProps() }>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender\n\t\t\t\t\tblock=\"core/calendar\"\n\t\t\t\t\tattributes={ { ...attributes, ...getYearMonth( date ) } }\n\t\t\t\t/>\n\t\t\t</Disabled>\n\t\t</div>\n\t);\n}\n"]}