{"version":3,"sources":["@wordpress/block-library/src/spacer/edit.js"],"names":["classnames","__","InspectorControls","useBlockProps","store","blockEditorStore","PanelBody","ResizableBox","RangeControl","compose","withInstanceId","withDispatch","useState","useEffect","View","MIN_SPACER_HEIGHT","MAX_SPACER_HEIGHT","MIN_SPACER_WIDTH","MAX_SPACER_WIDTH","SpacerEdit","attributes","isSelected","setAttributes","onResizeStart","onResizeStop","context","orientation","isResizing","setIsResizing","height","width","updateHeight","value","updateWidth","handleOnResizeStart","handleOnVerticalResizeStop","event","direction","elt","delta","spacerHeight","Math","min","parseInt","handleOnHorizontalResizeStop","spacerWidth","resizableBoxWithOrientation","blockOrientation","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","axis","position","isVisible","max","dispatch","toggleSelection"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { PanelBody, ResizableBox, RangeControl } from '@wordpress/components';\nimport { compose, withInstanceId } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport { useState, useEffect } from '@wordpress/element';\nimport { View } from '@wordpress/primitives';\n\nconst MIN_SPACER_HEIGHT = 1;\nconst MAX_SPACER_HEIGHT = 500;\n\nconst MIN_SPACER_WIDTH = 1;\nconst MAX_SPACER_WIDTH = 500;\n\nconst SpacerEdit = ( {\n\tattributes,\n\tisSelected,\n\tsetAttributes,\n\tonResizeStart,\n\tonResizeStop,\n\tcontext,\n} ) => {\n\tconst { orientation } = context;\n\tconst [ isResizing, setIsResizing ] = useState( false );\n\tconst { height, width } = attributes;\n\tconst updateHeight = ( value ) => {\n\t\tsetAttributes( {\n\t\t\theight: value,\n\t\t} );\n\t};\n\tconst updateWidth = ( value ) => {\n\t\tsetAttributes( {\n\t\t\twidth: value,\n\t\t} );\n\t};\n\n\tconst handleOnResizeStart = ( ...args ) => {\n\t\tonResizeStart( ...args );\n\t\tsetIsResizing( true );\n\t};\n\n\tconst handleOnVerticalResizeStop = ( event, direction, elt, delta ) => {\n\t\tonResizeStop();\n\t\tconst spacerHeight = Math.min(\n\t\t\tparseInt( height + delta.height, 10 ),\n\t\t\tMAX_SPACER_HEIGHT\n\t\t);\n\t\tupdateHeight( spacerHeight );\n\t\tsetIsResizing( false );\n\t};\n\n\tconst handleOnHorizontalResizeStop = ( event, direction, elt, delta ) => {\n\t\tonResizeStop();\n\t\tconst spacerWidth = Math.min(\n\t\t\tparseInt( width + delta.width, 10 ),\n\t\t\tMAX_SPACER_WIDTH\n\t\t);\n\t\tupdateWidth( spacerWidth );\n\t\tsetIsResizing( false );\n\t};\n\n\tconst resizableBoxWithOrientation = ( blockOrientation ) => {\n\t\tif ( blockOrientation === 'horizontal' ) {\n\t\t\treturn (\n\t\t\t\t<ResizableBox\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-library-spacer__resize-container',\n\t\t\t\t\t\t'resize-horizontal',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tsize={ {\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight: 24,\n\t\t\t\t\t} }\n\t\t\t\t\tminWidth={ MIN_SPACER_WIDTH }\n\t\t\t\t\tenable={ {\n\t\t\t\t\t\ttop: false,\n\t\t\t\t\t\tright: true,\n\t\t\t\t\t\tbottom: false,\n\t\t\t\t\t\tleft: false,\n\t\t\t\t\t\ttopRight: false,\n\t\t\t\t\t\tbottomRight: false,\n\t\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\t\ttopLeft: false,\n\t\t\t\t\t} }\n\t\t\t\t\tonResizeStart={ handleOnResizeStart }\n\t\t\t\t\tonResizeStop={ handleOnHorizontalResizeStop }\n\t\t\t\t\tshowHandle={ isSelected }\n\t\t\t\t\t__experimentalShowTooltip={ true }\n\t\t\t\t\t__experimentalTooltipProps={ {\n\t\t\t\t\t\taxis: 'x',\n\t\t\t\t\t\tposition: 'corner',\n\t\t\t\t\t\tisVisible: isResizing,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<ResizableBox\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-library-spacer__resize-container',\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t\tsize={ {\n\t\t\t\t\theight,\n\t\t\t\t} }\n\t\t\t\tminHeight={ MIN_SPACER_HEIGHT }\n\t\t\t\tenable={ {\n\t\t\t\t\ttop: false,\n\t\t\t\t\tright: false,\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tleft: false,\n\t\t\t\t\ttopRight: false,\n\t\t\t\t\tbottomRight: false,\n\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\ttopLeft: false,\n\t\t\t\t} }\n\t\t\t\tonResizeStart={ handleOnResizeStart }\n\t\t\t\tonResizeStop={ handleOnVerticalResizeStop }\n\t\t\t\tshowHandle={ isSelected }\n\t\t\t\t__experimentalShowTooltip={ true }\n\t\t\t\t__experimentalTooltipProps={ {\n\t\t\t\t\taxis: 'y',\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\tisVisible: isResizing,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n\n\tuseEffect( () => {\n\t\tif ( orientation === 'horizontal' && ! width ) {\n\t\t\tupdateWidth( 72 );\n\t\t\tupdateHeight( 0 );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t<View { ...useBlockProps() }>\n\t\t\t\t{ resizableBoxWithOrientation( orientation ) }\n\t\t\t</View>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Spacer settings' ) }>\n\t\t\t\t\t{ orientation === 'horizontal' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Width in pixels' ) }\n\t\t\t\t\t\t\tmin={ MIN_SPACER_WIDTH }\n\t\t\t\t\t\t\tmax={ Math.max( MAX_SPACER_WIDTH, width ) }\n\t\t\t\t\t\t\tvalue={ width }\n\t\t\t\t\t\t\tonChange={ updateWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ orientation !== 'horizontal' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Height in pixels' ) }\n\t\t\t\t\t\t\tmin={ MIN_SPACER_HEIGHT }\n\t\t\t\t\t\t\tmax={ Math.max( MAX_SPACER_HEIGHT, height ) }\n\t\t\t\t\t\t\tvalue={ height }\n\t\t\t\t\t\t\tonChange={ updateHeight }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t</>\n\t);\n};\n\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { toggleSelection } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonResizeStart: () => toggleSelection( false ),\n\t\t\tonResizeStop: () => toggleSelection( true ),\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( SpacerEdit );\n"]}