{"version":3,"sources":["@wordpress/editor/src/components/provider/use-block-editor-settings.js"],"names":["pick","defaultTo","Platform","useMemo","useDispatch","useSelect","store","coreStore","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","mediaUpload","editorStore","useBlockEditorSettings","settings","hasTemplate","select","canUserUseUnfilteredHTML","isPostTitleSelected","canUser","canUseUnfilteredHTML","reusableBlocks","getEntityRecords","per_page","web","native","hasUploadPermissions","isTitleSelected","undo","undefined","__experimentalReusableBlocks","search","searchOptions","__experimentalCanUserUseUnfilteredHTML","__experimentalUndo","__experimentalShouldInsertAtTheTop","outlineMode"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { pick, defaultTo } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Platform, useMemo } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tstore as coreStore,\n\t__experimentalFetchLinkSuggestions as fetchLinkSuggestions,\n} from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport { mediaUpload } from '../../utils';\nimport { store as editorStore } from '../../store';\n\n/**\n * React hook used to compute the block editor settings to use for the post editor.\n *\n * @param {Object}  settings    EditorProvider settings prop.\n * @param {boolean} hasTemplate Whether template mode is enabled.\n *\n * @return {Object} Block Editor Settings.\n */\nfunction useBlockEditorSettings( settings, hasTemplate ) {\n\tconst {\n\t\treusableBlocks,\n\t\thasUploadPermissions,\n\t\tcanUseUnfilteredHTML,\n\t\tisTitleSelected,\n\t} = useSelect( ( select ) => {\n\t\tconst { canUserUseUnfilteredHTML, isPostTitleSelected } = select(\n\t\t\teditorStore\n\t\t);\n\t\tconst { canUser } = select( coreStore );\n\n\t\treturn {\n\t\t\tcanUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t\treusableBlocks: select( coreStore ).getEntityRecords(\n\t\t\t\t'postType',\n\t\t\t\t'wp_block',\n\t\t\t\t/**\n\t\t\t\t * Unbounded queries are not supported on native so as a workaround, we set per_page with the maximum value that native version can handle.\n\t\t\t\t * Related issue: https://github.com/wordpress-mobile/gutenberg-mobile/issues/2661\n\t\t\t\t */\n\t\t\t\t{ per_page: Platform.select( { web: -1, native: 10 } ) }\n\t\t\t),\n\t\t\thasUploadPermissions: defaultTo(\n\t\t\t\tcanUser( 'create', 'media' ),\n\t\t\t\ttrue\n\t\t\t),\n\t\t\t// This selector is only defined on mobile.\n\t\t\tisTitleSelected: isPostTitleSelected && isPostTitleSelected(),\n\t\t};\n\t}, [] );\n\n\tconst { undo } = useDispatch( editorStore );\n\n\treturn useMemo(\n\t\t() => ( {\n\t\t\t...pick( settings, [\n\t\t\t\t'__experimentalBlockDirectory',\n\t\t\t\t'__experimentalBlockPatternCategories',\n\t\t\t\t'__experimentalBlockPatterns',\n\t\t\t\t'__experimentalFeatures',\n\t\t\t\t'__experimentalGlobalStylesBaseStyles',\n\t\t\t\t'__experimentalGlobalStylesUserEntityId',\n\t\t\t\t'__experimentalPreferredStyleVariations',\n\t\t\t\t'__experimentalSetIsInserterOpened',\n\t\t\t\t'alignWide',\n\t\t\t\t'allowedBlockTypes',\n\t\t\t\t'bodyPlaceholder',\n\t\t\t\t'codeEditingEnabled',\n\t\t\t\t'colors',\n\t\t\t\t'disableCustomColors',\n\t\t\t\t'disableCustomFontSizes',\n\t\t\t\t'disableCustomGradients',\n\t\t\t\t'enableCustomLineHeight',\n\t\t\t\t'enableCustomSpacing',\n\t\t\t\t'enableCustomUnits',\n\t\t\t\t'focusMode',\n\t\t\t\t'fontSizes',\n\t\t\t\t'gradients',\n\t\t\t\t'hasFixedToolbar',\n\t\t\t\t'hasReducedUI',\n\t\t\t\t'imageDefaultSize',\n\t\t\t\t'imageDimensions',\n\t\t\t\t'imageEditing',\n\t\t\t\t'imageSizes',\n\t\t\t\t'isRTL',\n\t\t\t\t'keepCaretInsideBlock',\n\t\t\t\t'maxWidth',\n\t\t\t\t'onUpdateDefaultBlockStyles',\n\t\t\t\t'styles',\n\t\t\t\t'template',\n\t\t\t\t'templateLock',\n\t\t\t\t'titlePlaceholder',\n\t\t\t\t'supportsLayout',\n\t\t\t\t'widgetTypesToHideFromLegacyWidgetBlock',\n\t\t\t] ),\n\t\t\tmediaUpload: hasUploadPermissions ? mediaUpload : undefined,\n\t\t\t__experimentalReusableBlocks: reusableBlocks,\n\t\t\t__experimentalFetchLinkSuggestions: ( search, searchOptions ) =>\n\t\t\t\tfetchLinkSuggestions( search, searchOptions, settings ),\n\t\t\t__experimentalCanUserUseUnfilteredHTML: canUseUnfilteredHTML,\n\t\t\t__experimentalUndo: undo,\n\t\t\t__experimentalShouldInsertAtTheTop: isTitleSelected,\n\t\t\toutlineMode: hasTemplate,\n\t\t} ),\n\t\t[\n\t\t\tsettings,\n\t\t\thasUploadPermissions,\n\t\t\treusableBlocks,\n\t\t\tcanUseUnfilteredHTML,\n\t\t\tundo,\n\t\t\tisTitleSelected,\n\t\t\thasTemplate,\n\t\t]\n\t);\n}\n\nexport default useBlockEditorSettings;\n"]}